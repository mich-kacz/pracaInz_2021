<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mobile system for vibration measurments with MEMS accelerometers: /home/michal/Pulpit/pracaInz_2021/actual/pracaInz_2021/src/fileManager/fileManager.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mobile system for vibration measurments with MEMS accelerometers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_328b968c35ac7c7f7576c36378b876f4.html">fileManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">fileManager.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fileManager_8h_source.html">fileManager.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfileManager__Data__s.html">fileManager_Data_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct with fields for number of samples in one channel and acquired data.  <a href="structfileManager__Data__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9f617cf05d1a8dcdcb63f371b9fd82cb"><td class="memItemLeft" align="right" valign="top"><a id="a9f617cf05d1a8dcdcb63f371b9fd82cb" name="a9f617cf05d1a8dcdcb63f371b9fd82cb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STD_RAW_PATH</b>&#160;&#160;&#160;&quot;//media/usb/raw_data&quot;</td></tr>
<tr class="separator:a9f617cf05d1a8dcdcb63f371b9fd82cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff47d05b600005b4bdbec076f862b700"><td class="memItemLeft" align="right" valign="top"><a id="aff47d05b600005b4bdbec076f862b700" name="aff47d05b600005b4bdbec076f862b700"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STD_PATH</b>&#160;&#160;&#160;&quot;//media/usb/vol_data&quot;</td></tr>
<tr class="separator:aff47d05b600005b4bdbec076f862b700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddfc0468a0fb0d80c116b5e16b9be17"><td class="memItemLeft" align="right" valign="top"><a id="afddfc0468a0fb0d80c116b5e16b9be17" name="afddfc0468a0fb0d80c116b5e16b9be17"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FILE_NAME_LEN</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:afddfc0468a0fb0d80c116b5e16b9be17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a06e1dd606f6ff1629c9a13f057cbae00"><td class="memItemLeft" align="right" valign="top"><a id="a06e1dd606f6ff1629c9a13f057cbae00" name="a06e1dd606f6ff1629c9a13f057cbae00"></a>
typedef struct <a class="el" href="structfileManager__Data__s.html">fileManager_Data_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>fileManager_Data_t</b></td></tr>
<tr class="memdesc:a06e1dd606f6ff1629c9a13f057cbae00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct with fields for number of samples in one channel and acquired data. <br /></td></tr>
<tr class="separator:a06e1dd606f6ff1629c9a13f057cbae00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7810fb04eb285642ec0db105da2ab15b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileManager_8c.html#a7810fb04eb285642ec0db105da2ab15b">fileManager_saveRawData</a> (uint16_t *buffer, unsigned int size)</td></tr>
<tr class="memdesc:a7810fb04eb285642ec0db105da2ab15b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves captured raw data to text file.  <a href="fileManager_8c.html#a7810fb04eb285642ec0db105da2ab15b">More...</a><br /></td></tr>
<tr class="separator:a7810fb04eb285642ec0db105da2ab15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96c6d90fbb03644fbe3058cd3ccd00d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileManager_8c.html#a96c6d90fbb03644fbe3058cd3ccd00d7">fileManager_prepareNewFile</a> (void)</td></tr>
<tr class="memdesc:a96c6d90fbb03644fbe3058cd3ccd00d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method searchs for any inserted sd card or USB pendrive and mounts it. Then checks if any data is present on inserted memory storage device and specifies the number of next one to prevent override.  <a href="fileManager_8c.html#a96c6d90fbb03644fbe3058cd3ccd00d7">More...</a><br /></td></tr>
<tr class="separator:a96c6d90fbb03644fbe3058cd3ccd00d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2cc6d1fb8b4580d319942086c47b10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileManager_8c.html#a4f2cc6d1fb8b4580d319942086c47b10">fileManager_saveAsVoltage</a> (void)</td></tr>
<tr class="memdesc:a4f2cc6d1fb8b4580d319942086c47b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method dynamically alocates memory for recently acquired data and writes it to the structure <a class="el" href="structfileManager__Data__s.html" title="Struct with fields for number of samples in one channel and acquired data.">fileManager_Data_s</a>. Then converts raw data to voltage and saves every channel to separate text file.  <a href="fileManager_8c.html#a4f2cc6d1fb8b4580d319942086c47b10">More...</a><br /></td></tr>
<tr class="separator:a4f2cc6d1fb8b4580d319942086c47b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae4252f3bdbf9166d5eb70a7514937d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileManager_8c.html#a7ae4252f3bdbf9166d5eb70a7514937d">fileManager_createFilterFile</a> (char *const path, unsigned int channel)</td></tr>
<tr class="memdesc:a7ae4252f3bdbf9166d5eb70a7514937d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method prepares file with correct number and name for data after filtration.  <a href="fileManager_8c.html#a7ae4252f3bdbf9166d5eb70a7514937d">More...</a><br /></td></tr>
<tr class="separator:a7ae4252f3bdbf9166d5eb70a7514937d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc059017a2e5e3c3f0ec6c197f620c93"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileManager_8c.html#abc059017a2e5e3c3f0ec6c197f620c93">fileManager_getPathToFilter</a> (char *const path, unsigned int channel)</td></tr>
<tr class="memdesc:abc059017a2e5e3c3f0ec6c197f620c93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method returns path to file in with voltage data is saved.  <a href="fileManager_8c.html#abc059017a2e5e3c3f0ec6c197f620c93">More...</a><br /></td></tr>
<tr class="separator:abc059017a2e5e3c3f0ec6c197f620c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9517e1795c0f524f186dad4ed2aa5ba0"><td class="memItemLeft" align="right" valign="top"><a id="a9517e1795c0f524f186dad4ed2aa5ba0" name="a9517e1795c0f524f186dad4ed2aa5ba0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>fileManager_unmountDisk</b> ()</td></tr>
<tr class="memdesc:a9517e1795c0f524f186dad4ed2aa5ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method unmounts previously mounted memory storage device to prevent damage in saved data. <br /></td></tr>
<tr class="separator:a9517e1795c0f524f186dad4ed2aa5ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Michał Kaczmarczyk </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-12-29 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7ae4252f3bdbf9166d5eb70a7514937d" name="a7ae4252f3bdbf9166d5eb70a7514937d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae4252f3bdbf9166d5eb70a7514937d">&#9670;&nbsp;</a></span>fileManager_createFilterFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * fileManager_createFilterFile </td>
          <td>(</td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method prepares file with correct number and name for data after filtration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>is the pointer to array where name of specified path will be written. </td></tr>
    <tr><td class="paramname">channel</td><td>is the number of channel in with we wants to work. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* returns pointer to array with written path. </dd></dl>

</div>
</div>
<a id="abc059017a2e5e3c3f0ec6c197f620c93" name="abc059017a2e5e3c3f0ec6c197f620c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc059017a2e5e3c3f0ec6c197f620c93">&#9670;&nbsp;</a></span>fileManager_getPathToFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * fileManager_getPathToFilter </td>
          <td>(</td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method returns path to file in with voltage data is saved. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>is the pointer to array where name of specified path will be written. </td></tr>
    <tr><td class="paramname">channel</td><td>is the number of channel in with we wants to work. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* returns pointer to array with written path. </dd></dl>

</div>
</div>
<a id="a96c6d90fbb03644fbe3058cd3ccd00d7" name="a96c6d90fbb03644fbe3058cd3ccd00d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96c6d90fbb03644fbe3058cd3ccd00d7">&#9670;&nbsp;</a></span>fileManager_prepareNewFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileManager_prepareNewFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method searchs for any inserted sd card or USB pendrive and mounts it. Then checks if any data is present on inserted memory storage device and specifies the number of next one to prevent override. </p>
<dl class="section return"><dt>Returns</dt><dd>int if success returns 0. </dd></dl>

</div>
</div>
<a id="a4f2cc6d1fb8b4580d319942086c47b10" name="a4f2cc6d1fb8b4580d319942086c47b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f2cc6d1fb8b4580d319942086c47b10">&#9670;&nbsp;</a></span>fileManager_saveAsVoltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileManager_saveAsVoltage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method dynamically alocates memory for recently acquired data and writes it to the structure <a class="el" href="structfileManager__Data__s.html" title="Struct with fields for number of samples in one channel and acquired data.">fileManager_Data_s</a>. Then converts raw data to voltage and saves every channel to separate text file. </p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a7810fb04eb285642ec0db105da2ab15b" name="a7810fb04eb285642ec0db105da2ab15b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7810fb04eb285642ec0db105da2ab15b">&#9670;&nbsp;</a></span>fileManager_saveRawData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileManager_saveRawData </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves captured raw data to text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer for array with uint16_t type elements. Buffer array content will be saved to text file. </td></tr>
    <tr><td class="paramname">size</td><td>Number of elements in buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
